<link rel="import"
      href="../polymer/lib/utils/mixin.html">
<link rel="import"
      href="../iron-meta/iron-meta.html">

<script>
  (() => {
    'use strict'
    if (!window.Sea) window.Sea = {}

    /**
    * # sea-validator-mixin
    *
    * **Rough port from [iron-validator-behavior](https://www.webcomponents.org/element/PolymerElements/iron-validator-behavior),
    * Used to implement custom form validators**
    *
    * Implementation should override the `validate` method, which is used by iron-form.
    *
    * **Important:** Don't include implementation directly in the form!
    * Put it just before but outside, otherwise the form will try to validate it as an input and fail
    *
    * @polymer
    * @mixinFunction
    * @memberof Sea
    * @extends base
    */
    Sea.ValidatorMixin = Polymer.dedupingMixin(base => class ValidatorMixin extends base {
      constructor () {
        super()
        new Polymer.IronMeta({ // eslint-disable-line no-new
          type: 'validator',
          key: this.constructor.is,
          value: this
        })
      }

      /**
       * Validates a form field
       *
       * @param {*} value The value to validate
       * @return {Boolean} Wether the value is valid
       */
      validate (value) { }
    })
  })()
</script>
