<link rel="import"
      href="../polymer/lib/elements/dom-module.html">
<link rel="import"
      href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import"
      href="../paper-button/paper-button.html">
<link rel="import"
      href="../sea-element/sea-element-mixin.html">

<dom-module id="sea-form-button">
  <script>
    (() => {
      'use strict'
      const PaperButton = customElements.get('paper-button')

      /**
      * # sea-form-button
      *
      * **A [paper-button](https://www.webcomponents.org/element/PolymerElements/paper-button) that can submit a sea-form**
      *
      * Can be configured to raise a `sea-form-submit` event when tapped
      *
      * @polymer
      * @customElement
      * @memberof Sea
      * @extends paper-button
      * @implements {Sea_ElementMixin}
      */
      Sea.FormButton = class FormButton extends
        Polymer.GestureEventListeners(
          Sea.ElementMixin(
            PaperButton)) {
        static get is () { return 'sea-form-button' }

        static get properties () {
          return {
            /**
            * Wether tapping this button will raise a `sea-form-submit` event
            * @type {Boolean}
            */
            submit: {
              type: Boolean,
              reflectToAttribute: true
            }
          }
        }

        connectedCallback () {
          super.connectedCallback()
          Polymer.Gestures.addListener(this, 'tap', this._raiseSubmit)
        }

        disconnectedCallback () {
          super.disconnectedCallback()
          Polymer.Gestures.removeListener(this, 'tap', this._raiseSubmit)
        }

        /**
         * Listens for `tap` gesture events.
         *
         * If submit is true, raises a `sea-form-submit` event.
         */
        _raiseSubmit () { if (this.submit === true) this.raise('sea-form-submit') }

        /**
        * Raised when button is tapped and submit is true.
        *
        * @event sea-form-submit
        */
      }

      customElements.define(Sea.FormButton.is, Sea.FormButton)
    })()
  </script>
</dom-module>
